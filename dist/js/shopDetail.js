"use strict";$(function(){var t=new Object;t=function(){var t=location.search,e=new Object;if(-1!=t.indexOf("?")){var n=t.substr(1);strs=n.split("&");for(var i=0;i<strs.length;i++)e[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1])}return e}(),console.log(t.id);var u=new XMLHttpRequest,v=t.id;u.onreadystatechange=function(){if(4===u.readyState){var t=JSON.parse(u.responseText);console.log(t);var e={};for(var n in t[0])e[n]=t[0][n];var i=document.querySelector("#servicecode"),s=document.createElement("div");s.className="sp_txt",s.className="fl",s.innerHTML=t.map(function(t){return console.log(t),'\n\t\t\t\t<p class="sp_name">'+t.trade_name+'</p>\n\t\t\t\t<p class="sp_sales">销量<em class="shop_sales">15851</em>&nbsp;|&nbsp;粉丝<em class="shop_fans">5363</em></p>\n\t\t\t\t'}).join(""),i.appendChild(s);var a=document.querySelector("#bxslider"),l=document.createElement("li");l.className="opacity",l.innerHTML=t.map(function(t){return console.log(t),'\n\t\t\t\t<div class="small"> <img src="'+t.imgurl+'" alt=""  /></div>\n\t\t\t\t'}).join(""),a.appendChild(l);document.querySelector("#content_zoom");document.querySelector(".goods").children[0].src=t[0].imgurl,document.querySelector("#detailupper").innerHTML=t.map(function(t){return'<li class="shopslist" data-guid="'+t.id+'">\n\t\t\t\t<div class="upper_title">'+t.shopName+'</div>\n\t\t\t\t\t\t<div class="upper_xuyan">\n\t\t\t\t\t\t\t<span class="js_more CUSTOMER-SERVICE">了解更多&gt;&gt;</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="upper_model clearfix">\n\t\t\t\t\t\t  <div class="fl upper_model_a"><span>型号:</span><span>T094.210.11.121.00</span></div>\n\t\t\t\t\t\t  <div class="fl upper_model_b"><span>编号:</span><span>48488</span></div>\n\t\t\t\t\t\t  <div class="fl upper_model_c"><span>品牌:</span><span>'+t.shopName+'</span></div>\n\t\t\t\t\t\t  <div class="fr upper_model_d"><span>销量:</span><span>132</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="atmosphere">\n\t\t\t\t\t\t    <a target="_blank" href="/topics/2018920birthday/">\n\t\t\t\t\t\t    \t<img src="../images/detail_right.jpg" alt="">\n\t\t\t\t\t\t    </a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="upper_price">\n\t\t\t\t\t\t    <div class="upper_price_jiage clearfix">\n\t\t\t\t\t\t        <div class="upper_price_jiage_left fl">万表价</div>\n\t\t\t\t\t\t      <div class="upper_price_jiage_right fl">\n\t\t\t\t\t\t        <span class="upper_price_jiage_a">￥</span>\n\t\t\t\t\t\t        <span class="upper_price_jiage_b js_price">'+t.sale+'</span>\n\t\t\t\t\t\t        <span class="upper_price_jiage_d">一口价</span>\n\t\t\t\t\t\t        <span class="upper_price_jiage_c">￥'+t.price+'</span>\n\t\t\t\t\t\t      </div>\n\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t  <div class="upper_stages clearfix">\n\t\t\t\t\t\t    <div class="upper_stages_left fl">分期</div>\n\t\t\t\t\t\t    <div class="upper_stages_right fl">\n\t\t\t\t\t\t      <span class="upper_stages_a CUSTOMER-SERVICE">每月<i class="js_stages">'+t.price/12+'</i>元×12期</span>\n\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="upper_give clearfix">\n\t\t\t\t\t\t    <div class="upper_give_left fl">配送</div>\n\t\t\t\t\t\t    <div class="upper_give_right fl"><i>（顺丰包邮）</i>预计2-8个工作日内发货</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="upper_style clearfix">\n\t\t\t\t\t\t  <div class="upper_style_left fl">款式</div>\n\t\t\t\t\t\t  <div class="upper_style_right fl">\n\t\t\t\t\t\t    <a href="/goods/48488" class="fl upper_style_right_action">\n\t\t\t\t\t\t      <span class="upper_style_right_img fl"><img src="" alt=""></span>\n\t\t\t\t\t\t      <span class="upper_style_right_text fl">'+t.color+'</span>\n\t\t\t\t\t\t      <div class="tag icon-a-o-arrow-black"></div>\n\t\t\t\t\t\t    </a>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="upper_number clearfix">\n\t\t\t\t\t\t\t  <div class="upper_number_left fl">数量</div>\n\t\t\t\t\t\t\t  <div class="upper_number_right fl">\n\t\t\t\t\t\t\t    <div class="upper_number_right_a fl">\n\t\t\t\t\t\t\t      <span class="fl reduce" data-type="subtract">-</span>\n\t\t\t\t\t\t\t      <input type="text" value="'+t.num+'" class="cont fl" id="count">\n\t\t\t\t\t\t\t      <span class="fl plus" data-type="add">+</span>\n\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="upper_button clearfix">\n\t\t\t\t\t\t    <div class="upper_button_a fl js_purchase" data-type="buyquick">\n\t\t\t\t\t\t\t    立即购买\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t    <div class="upper_button_b fl" id="js_cart" data-type="buybtn">\n\t\t\t\t\t\t    \t加入购物车\n\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t    </li>\n\t\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t'}).join("")}},u.open("get","../api/shopdetail/shopdetail.php?id="+v,!0),u.send();var e=document.querySelector("#detailupper"),_=Cookie.get("goodslist");_=""===_?[]:JSON.parse(_),e.onclick=function(t){var e=(t=t||window.event).target||t.srcElement;if("subtract"===e.getAttribute("data-type")){var n=e.nextSibling.nextSibling.value;console.log(n),0==--n&&(n=1),e.nextSibling.nextSibling.value=n}if("add"===e.getAttribute("data-type")){n=e.previousElementSibling.value;n++,e.previousElementSibling.value=n}new XMLHttpRequest;if(u.open("get","../api/shopdetail/getnum.php?num="+n+"&id="+v,!0),u.send(),"buyquick"===e.getAttribute("data-type"))return username=Cookie.get("username"),"请登录"==document.querySelector("#nowloginindetail").innerText?(alert("请先登录"),void(location.href="../html/login.html")):void(location.href="../html/quickbuycar.html?id="+v);if("buybtn"===e.getAttribute("data-type")){if(username=Cookie.get("username"),"请登录"==document.querySelector("#nowloginindetail").innerText)return alert("请先登录"),void(location.href="../html/login.html");var i=e.parentNode.parentNode;console.log(i);var s=i.getAttribute("data-guid"),a=i.parentNode.previousElementSibling.children[0].children[0].children[0].children[0].src,l=i.children[0].innerText,r=i.children[6].children[1].children[0].children[1].innerText,p=i.children[4].children[0].children[1].children[1].innerText,c=(n=i.children[7].children[1].children[0].children[1].value,i.parentNode.parentNode.parentNode.parentNode.previousElementSibling.previousElementSibling.children[1].children[0].children[0].children[1].children[2].children[0].innerText);console.log(c);for(var d=0;d<_.length;d++)if(_[d].guid===s){_[d].qty++;break}if(d===_.length){var o={id:s,imgurl:a,shopName:l,color:r,sale:p,trade_name:c,qty:n};_.push(o)}Cookie.set("goodslist",JSON.stringify(_)),alert("添加成功"),location.href="../html/buycar.html"}},username=Cookie.get("username"),console.log(username),document.querySelector("#nowloginindetail").innerText=username});