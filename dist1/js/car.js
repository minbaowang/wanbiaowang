"use strict";jQuery(function(a){function t(e){var n=e.parent().prev().text(),t=(n=n.slice(2))*e.parent().find("input").val();e.parent().next().html("￥&nbsp;"+t.toFixed(1))}function c(){for(var e=0,n=0;n<a(".nownum").length;n++)e+=1*a(".nownum").eq(n).val();a(".all span i").text(e)}function o(e){for(var n=0,t=0;t<e.length;t++)n+=1*a(".nownum").eq(e[t]).val();a(".total_num i").text(n)}function r(e){for(var n=0,t=0;t<e.length;t++){var c=a(".good_total").eq(e[t]).text();n+=c=1*c.slice(2)}a(".total_price i").html("￥&nbsp;"+n.toFixed(1))}function i(){for(var e=[],n=0;n<a(".good_check input").length;n++)a(".good_check input").eq(n).prop("checked")&&e.push(n);return e}function d(){0===a(".addnum").length&&a(".car").html("")}a("#car").on("click",".addnum",function(){var e=a(this).prev().val();e++,a(this).prev().val(e),t(a(this)),c();var n=i();o(n),r(n)}),a("#car").on("click",".cutnum",function(){var e=a(this).next().val();--e<1&&(e=1),a(this).next().val(e),t(a(this)),c();var n=i();o(n),r(n)}),a("#car").on("click",".title input",function(){a(".good_check input").prop("checked",this.checked);var e=i();o(e),r(e)}),a("#car").on("click",".good_check input",function(){var e=i();o(e),r(e),e.length===a(".good_check input").length?a(".title input").prop("checked","checked"):a(".title input").removeAttr("checked")}),a("#car").on("click",".account input",function(){a(".good_check input").prop("checked",this.checked)}),a("#car").on("click",".account a",function(){var e=i();if(confirm("你确定要删除选中商品吗？"))for(var n=e.length-1;0<=n;n--)a(".goods").children().eq(e[n]).remove();d()}),a("#car").on("click",".good_del a:first",function(){confirm("你确定要删除该商品吗？")&&a(this).parent().parent().remove(),d()})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".goods"),n=document.cookie,t=n.indexOf("[");n=""===(n=n.slice(t))?[]:JSON.parse(n);for(var c=0;c<n.length;c++){var a=document.createElement("li"),o=document.createElement("p");o.className="good_check";var r=document.createElement("input");r.type="checkbox";var i=document.createElement("img");i.src=n[c].imgurl,o.appendChild(r),o.appendChild(i),a.appendChild(o);var d=document.createElement("p");d.className="good_name",d.innerText=n[c].name,a.appendChild(d);var l=document.createElement("p");l.className="good_price",l.innerHTML="￥&nbsp;"+(1*n[c].price.slice(3)).toFixed(1),a.appendChild(l);var p=document.createElement("p");p.className="good_num";var u=document.createElement("span");u.className="cutnum",u.innerText="-";var m=document.createElement("input");m.className="nownum",m.value=n[c].qty;var h=document.createElement("span");h.className="addnum",h.innerText="+",p.appendChild(u),p.appendChild(m),p.appendChild(h),a.appendChild(p);var s=document.createElement("p");s.className="good_total",s.innerHTML="￥&nbsp;"+(1*n[c].price.slice(3)*(1*n[c].qty)).toFixed(1),a.appendChild(s);var v=document.createElement("p");v.className="good_del";var f=document.createElement("a");f.innerText="删除";var g=document.createElement("a");g.innerText="移入收藏夹",v.appendChild(f),v.appendChild(g),a.appendChild(v),e.appendChild(a)}});