"use strict";document.addEventListener("DOMContentLoaded",function(){var e,u,i,s,d,m,p,v,f,y;!function(){var e=document.querySelector(".middle"),n=[200,304],p=new XMLHttpRequest;function v(e,t,n){e.test(t)||(n.innerText="格式不正确",n.style.color="#F10215")}function f(t){p.onload=function(){if(0<=n.indexOf(p.status)){var e=p.responseText;"yes"===e?(t.innerText="允许注册",t.style.color="#58bc58"):"no"===e&&(t.innerText="该用户已被注册",t.style.color="#F10215")}}}e.oninput=function(e){var t=e.target.parentNode,n=t.children[2];if("username"===t.className){var r=e.target.value,o=/^[a-zA-Z0-9\u4E00-\u9FA5][a-zA-Z0-9\u4E00-\u9FA5]{2,6}$/;o.test(r)?o.test(r)&&(f(n),p.open("get","../api/username_check.php?username="+r,!0),p.send()):(n.innerText="请输入3-7位仅由字母、数字或中文组成的用户名",n.style.color="#F10215")}if("email"===t.className){var a=e.target.value,c=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/;v(c,a,n),c.test(a)&&(f(n),p.open("get","../api/email_check.php?email="+a,!0),p.send())}if("phone"===t.className){var l=e.target.value,u=/^1[34578]\d{9}$/;v(u,l,n),u.test(l)&&(f(n),p.open("get","../api/phone_check.php?phone="+l,!0),p.send())}if("password"===t.className){var i=e.target.value,s=/^[0-9a-zA-Z][0-9a-zA-Z]{5,14}$/;s.test(i)?s.test(i)&&(n.innerText="允许注册",n.style.color="#58bc58"):(n.innerText="请输入6-15位仅由字母、数字组成的密码",n.style.color="#F10215")}if("confirm"===t.className){var d=t.previousElementSibling.children[1].value,m=e.target.value;m!=d?(n.innerText="两次密码不一致",n.style.color="#F10215"):m===d&&(n.innerText="允许注册",n.style.color="#58bc58")}}}(),function(){var e=document.querySelector(".code button"),t=e.previousElementSibling;function n(e){for(var t="",n=0;n<4;n++){t+="0123456789abcdefghijklmnopqrstuvwxyz"[parseInt(27*Math.random())]}e.innerText=t}n(t),e.onclick=function(){n(t)}}(),e=document.querySelector(".btn"),u=document.querySelector("#username"),i=document.querySelector("#email"),s=document.querySelector("#password"),d=document.querySelector("#confirm"),m=document.querySelector("#phone"),p=document.querySelector(".num"),v=document.querySelector("#code"),f=document.querySelector(".middle p input"),y=[200,304],e.onclick=function(){var e=u.value,t=i.value,n=s.value,r=d.value,o=m.value;f.checked||alert("请接受用户协议");var a=p.innerText,c=v.value;if(c!==a&&alert("验证码不正确"),""!==e&&""!==t&&""!==n&&""!==o&&""!==c&&""!==r||alert("输入框不能为空"),f.checked&&c===a&&""!==e&&""!==t&&""!==n&&""!==o&&""!==c&&""!==r){var l=new XMLHttpRequest;l.onload=function(){if(0<=y.indexOf(l.status)){var e=l.responseText;"yes"===e?(alert("恭喜您，注册成功！"),location.href="../html/login.html"):"no"===e&&alert("很遗憾，注册失败！")}},l.open("get","../api/reg.php?username="+e+"&email="+t+"&password="+n+"&phone="+o,!0),l.send()}}});